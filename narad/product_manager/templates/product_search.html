{% extends "base.html" %}

{% load bootstrap4 %}

{% block body %}
<h1> Product Search</h1>

{{ search_query_string }}
<form enctype="multipart/form-data" action="{% url 'products-search' %}" method="get" class="form">
  {% bootstrap_form form %}

  {% buttons %}
    <input type="submit" class="btn btn-primary">Search</button>
  {% endbuttons %}
</form>
<table>
  <tr>
    <th>SKU</th>
    <th>Name </th>
    <th>Description</th>
    <th>Is Active?</th>
    <th>Update</th>
  </tr>
  {% for product in products %}
    <tr>
      <td>{{ product.sku }}</td>
      <td>{{ product.name }}</td>
      <td>{{ product.description }}</td>
      <td>
        {% if product.is_active %}
          Yes
        {% else %}
          No
        {% endif %}
      </td>
      <td><a href={% url 'product-update' product_id=product.pk%}>Update</a></td>
    </tr>
  {% endfor %}
</table>
<div class="pagination">
    <span class="step-links">
        {% if products.has_previous %}
            <a href="?page=1&{{ search_query_string }}">&laquo; first</a>
            <a href="?page={{ products.previous_page_number }}&{{ search_query_string }}">previous</a>
        {% endif %}

        <span class="current">
            Page {{ products.number }} of {{ products.paginator.num_pages }}.
        </span>

        {% if products.has_next %}
            <a href="?page={{ products.next_page_number }}&{{ search_query_string }}">next</a>
            <a href="?page={{ products.paginator.num_pages }}&{{ search_query_string }}">last &raquo;</a>
        {% endif %}
    </span>
</div>
{% endblock %}
